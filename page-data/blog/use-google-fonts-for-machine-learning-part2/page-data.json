{"componentChunkName":"component---src-templates-blog-post-template-js","path":"/blog/use-google-fonts-for-machine-learning-part2","result":{"data":{"markdownRemark":{"html":"<p><figure class=\"md-figure\"><img src=\"/static/ml-timelapse-974efeb0728b4535686b44d32c91e608.gif\"><figcaption>Machine learning training time-lapse. Image by Author.</figcaption></figure></p>\n<p>Let’s pick up from where we left off in the <a href=\"/blog/use-google-fonts-for-machine-learning-part1\">last post</a>. We cleaned up the JSON annotations and exported it as a CSV file. Now, let’s load the CSV file back in, and filter them with conditions we define and generate PNG images so that we can use the images to train Convolutional Neural Networks.</p>\n<h2>Directory Setup</h2>\n<p>Again, I am treating this post as a Jupyter Notebook, so if you want to follow along, open Jupyter Notebook in your own environment. You will also need to download Google Fonts Github repo and generate the CSV annotations. We went over all of these in <a href=\"\">the last post</a>, so please check it out first.</p>\n<p>As you can see from the tree diagram below, the Google Fonts Github repo is downloaded into input directory. All the font files are stored in ofl subdirectory, which is how it is originally set up and I have not made any changes to it. I have also set up notebook directory with .ipynb notebook (this post) as well as the CSV annotation file.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.\n├── input\n│   ├── fonts\n│   │   ...\n│   │   ├── ofl\n│   │   ...\n│   ├── fonts-master.json\n└── notebook\n    └── google-fonts-ml\n        ├── google-fonts-ml.ipynb\n        └── google-fonts-annotaion.csv</code></pre></div>\n<h2>Load CSV Annotations</h2>\n<p>First, we will load the CSV annotation as pandas.DataFrame.</p>\n<p><div id=\"gist106212232\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gfonts-2-loadcsv-py\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-gfonts-2-loadcsv-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gfonts-2-loadcsv-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># modules we need this time</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-loadcsv-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gfonts-2-loadcsv-py-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>import</span> <span class=pl-s1>matplotlib</span>.<span class=pl-s1>pyplot</span> <span class=pl-k>as</span> <span class=pl-s1>plt</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-loadcsv-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gfonts-2-loadcsv-py-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>from</span> <span class=pl-v>PIL</span> <span class=pl-k>import</span> <span class=pl-v>Image</span>,<span class=pl-v>ImageDraw</span>,<span class=pl-v>ImageFont</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-loadcsv-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gfonts-2-loadcsv-py-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>import</span> <span class=pl-s1>pandas</span> <span class=pl-k>as</span> <span class=pl-s1>pd</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-loadcsv-py-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gfonts-2-loadcsv-py-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>import</span> <span class=pl-s1>numpy</span> <span class=pl-k>as</span> <span class=pl-s1>np</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-loadcsv-py-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gfonts-2-loadcsv-py-LC6\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-loadcsv-py-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gfonts-2-loadcsv-py-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># load the CSV we created in the last post</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-loadcsv-py-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gfonts-2-loadcsv-py-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df</span> <span class=pl-c1>=</span> <span class=pl-s1>pd</span>.<span class=pl-en>read_csv</span>(<span class=pl-s>&#39;./google-fonts-annotaion.csv&#39;</span>)</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/erraticgenerator/314a406afafd6571b0d5c5f828a2776f/raw/7f284a0bd64ae6dff6b402a4f74b845613f10552/gfonts-2-loadcsv.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/erraticgenerator/314a406afafd6571b0d5c5f828a2776f#file-gfonts-2-loadcsv-py\">gfonts-2-loadcsv.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<h1>Look at Data Summary</h1>\n<p>Let’s have a look at what we are dealing with here — how many fonts are within each category, how many fonts have which variants, etc. We first filter the list of fonts using a regular expression to select the columns we want to look at. Find all the rows with the value of 1, sum all these rows, and sort by frequency.</p>\n<p><div id=\"gist106212473\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gfonts-2-summary-py\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-gfonts-2-summary-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gfonts-2-summary-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-en>print</span>(<span class=pl-s>&#39;Number of fonts in each variant:&#39;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-summary-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gfonts-2-summary-py-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-en>print</span>(<span class=pl-s1>df</span>[<span class=pl-s1>df</span>.<span class=pl-en>filter</span>(<span class=pl-s1>regex</span><span class=pl-c1>=</span><span class=pl-s>r&#39;^variants_&#39;</span>, <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-s1>columns</span>].<span class=pl-en>eq</span>(<span class=pl-c1>1</span>).<span class=pl-en>sum</span>().<span class=pl-en>sort_values</span>(<span class=pl-s1>ascending</span><span class=pl-c1>=</span><span class=pl-c1>False</span>))</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-summary-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gfonts-2-summary-py-LC3\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-summary-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gfonts-2-summary-py-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-en>print</span>(<span class=pl-s>&#39;<span class=pl-cce>\\n</span>Number of fonts in each subset:&#39;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-summary-py-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gfonts-2-summary-py-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-en>print</span>(<span class=pl-s1>df</span>[<span class=pl-s1>df</span>.<span class=pl-en>filter</span>(<span class=pl-s1>regex</span><span class=pl-c1>=</span><span class=pl-s>r&#39;^subsets_&#39;</span>, <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-s1>columns</span>].<span class=pl-en>eq</span>(<span class=pl-c1>1</span>).<span class=pl-en>sum</span>().<span class=pl-en>sort_values</span>(<span class=pl-s1>ascending</span><span class=pl-c1>=</span><span class=pl-c1>False</span>))</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-summary-py-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gfonts-2-summary-py-LC6\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-summary-py-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gfonts-2-summary-py-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-en>print</span>(<span class=pl-s>&#39;<span class=pl-cce>\\n</span>Number of fonts in each category:&#39;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-summary-py-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gfonts-2-summary-py-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-en>print</span>(<span class=pl-s1>df</span>[<span class=pl-s1>df</span>.<span class=pl-en>filter</span>(<span class=pl-s1>regex</span><span class=pl-c1>=</span><span class=pl-s>r&#39;^category_&#39;</span>, <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-s1>columns</span>].<span class=pl-en>eq</span>(<span class=pl-c1>1</span>).<span class=pl-en>sum</span>().<span class=pl-en>sort_values</span>(<span class=pl-s1>ascending</span><span class=pl-c1>=</span><span class=pl-c1>False</span>))</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/erraticgenerator/592e80d6842f79a55a640fa2f97cd381/raw/f5f75a2ae76ebc68a15b6d6e0da812817629e00d/gfonts-2-summary.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/erraticgenerator/592e80d6842f79a55a640fa2f97cd381#file-gfonts-2-summary-py\">gfonts-2-summary.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>At the time of writing, for instance, there are 325 display, 311 sans-serif, and 204 serif font families. The number of fonts is not the same as the number of font files, however, because the CSV annotation is only counting the font families and there are other factors such as variable fonts, etc.</p>\n<h2>Filtering Fonts</h2>\n<p>Now, let’s create conditions to create sub-groups of fonts. Because we took the time to create a nice CSV annotation it is easy to filter fonts according to our own criteria. Say, how many fonts that are <code class=\"language-text\">thin</code>, <code class=\"language-text\">regular</code> and <code class=\"language-text\">thai</code>?</p>\n<p><div id=\"gist106213302\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gfonts-2-filter1-py\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-gfonts-2-filter1-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gfonts-2-filter1-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>mask</span> <span class=pl-c1>=</span> (<span class=pl-s1>df</span>.<span class=pl-en>filter</span>(<span class=pl-s1>regex</span><span class=pl-c1>=</span><span class=pl-s>&#39;thin&#39;</span>, <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>sum</span>(<span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>astype</span>(<span class=pl-s1>bool</span>) <span class=pl-c1>&amp;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter1-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gfonts-2-filter1-py-LC2\" class=\"blob-code blob-code-inner js-file-line\">        <span class=pl-s1>df</span>.<span class=pl-en>filter</span>(<span class=pl-s1>regex</span><span class=pl-c1>=</span><span class=pl-s>&#39;regular&#39;</span>, <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>sum</span>(<span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>astype</span>(<span class=pl-s1>bool</span>) <span class=pl-c1>&amp;</span> </td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter1-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gfonts-2-filter1-py-LC3\" class=\"blob-code blob-code-inner js-file-line\">        <span class=pl-s1>df</span>.<span class=pl-en>filter</span>(<span class=pl-s1>regex</span><span class=pl-c1>=</span><span class=pl-s>&#39;thai&#39;</span>, <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>sum</span>(<span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>astype</span>(<span class=pl-s1>bool</span>))</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter1-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gfonts-2-filter1-py-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df_selected</span> <span class=pl-c1>=</span> <span class=pl-s1>df</span>[<span class=pl-s1>mask</span>]</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter1-py-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gfonts-2-filter1-py-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df_selected</span></td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/erraticgenerator/7bfab1e8f1d8502a31f424b8750bdac1/raw/3000aae69df6f7e22a7bdd9df402a77fa20bec7c/gfonts-2-filter1.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/erraticgenerator/7bfab1e8f1d8502a31f424b8750bdac1#file-gfonts-2-filter1-py\">gfonts-2-filter1.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>The reason we <code class=\"language-text\">sum(axis=1)</code> after filtering is to capture multiple columns if they meet the same condition. For example, if we filter with <code class=\"language-text\">italic</code>, there are multiple columns that will be included such as <code class=\"language-text\">bolditalic</code>, <code class=\"language-text\">mediumitalic</code>, etc. We can combine multiple conditions to a boolean Series object called <code class=\"language-text\">mask</code> and pass it to our DataFrame object. It will only return the rows that meet the conditions. We use <code class=\"language-text\">&amp;</code> to only select the fonts that meet all the conditions.</p>\n<p>Here is another one — Let’s find the fonts that support <code class=\"language-text\">chinese</code> and <code class=\"language-text\">sans-serif</code>.</p>\n<p><div id=\"gist106213308\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gfonts-2-filter2-py\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-gfonts-2-filter2-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gfonts-2-filter2-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>mask</span> <span class=pl-c1>=</span> (<span class=pl-s1>df</span>.<span class=pl-en>filter</span>(<span class=pl-s1>regex</span><span class=pl-c1>=</span><span class=pl-s>&#39;chinese&#39;</span>, <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>sum</span>(<span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>astype</span>(<span class=pl-s1>bool</span>) <span class=pl-c1>&amp;</span> </td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter2-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gfonts-2-filter2-py-LC2\" class=\"blob-code blob-code-inner js-file-line\">       <span class=pl-s1>df</span>.<span class=pl-en>filter</span>(<span class=pl-s1>regex</span><span class=pl-c1>=</span><span class=pl-s>&#39;sans-serif&#39;</span>, <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>sum</span>(<span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>astype</span>(<span class=pl-s1>bool</span>))</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter2-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gfonts-2-filter2-py-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df_selected</span> <span class=pl-c1>=</span> <span class=pl-s1>df</span>[<span class=pl-s1>mask</span>]</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter2-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gfonts-2-filter2-py-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df_selected</span></td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/erraticgenerator/a4b855ad83bc907097af5b10cf1fdc97/raw/53d1b6e4980a88d836e678e79f7eb07c48123808/gfonts-2-filter2.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/erraticgenerator/a4b855ad83bc907097af5b10cf1fdc97#file-gfonts-2-filter2-py\">gfonts-2-filter2.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>I get 3 fonts back that meet the criteria — NotoSansHK, NotoSansSC, and NotoSansTC. For some reason, these NotoSans fonts were not included in the Google Fonts Github repo. So, you will have to manually download them if you need to use them.</p>\n<p>We don’t want to keep editing the <code class=\"language-text\">mask</code> object each time we use a different set of filters, so we will make a list with all the filters we want to use and simply iterate over them. These strings are in fact regular expressions and you can try more advanced filtering on your own.</p>\n<p><div id=\"gist106213329\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gfonts-2-filter3-py\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-gfonts-2-filter3-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gfonts-2-filter3-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>regex_filters</span> <span class=pl-c1>=</span> [<span class=pl-s>&#39;_regular&#39;</span>, <span class=pl-s>&#39;_japanese&#39;</span>, <span class=pl-s>&#39;_serif&#39;</span>]</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter3-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gfonts-2-filter3-py-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter3-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gfonts-2-filter3-py-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df_new</span> <span class=pl-c1>=</span> <span class=pl-s1>pd</span>.<span class=pl-en>concat</span>([<span class=pl-s1>df</span>.<span class=pl-en>filter</span>(<span class=pl-s1>regex</span><span class=pl-c1>=</span><span class=pl-s1>regex</span>, <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>sum</span>(<span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>astype</span>(<span class=pl-s1>bool</span>) <span class=pl-k>for</span> <span class=pl-s1>regex</span> <span class=pl-c1>in</span> <span class=pl-s1>regex_filters</span>], <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter3-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gfonts-2-filter3-py-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>mask</span> <span class=pl-c1>=</span> <span class=pl-s1>df_new</span>.<span class=pl-en>all</span>(<span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter3-py-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gfonts-2-filter3-py-LC5\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter3-py-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gfonts-2-filter3-py-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df</span>.<span class=pl-s1>loc</span>[<span class=pl-s1>mask</span>]</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/erraticgenerator/03f27ac0b1079cb83d3511a6560d9f96/raw/b1dfab4325ad30f15e020fc5de4fefe3629b2a89/gfonts-2-filter3.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/erraticgenerator/03f27ac0b1079cb83d3511a6560d9f96#file-gfonts-2-filter3-py\">gfonts-2-filter3.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>How about we make this into a reusable function? This function will take DataFrame and regex filter list as inputs, and outputs a list of font names.</p>\n<p><div id=\"gist106213334\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gfonts-2-filter-func-py\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-gfonts-2-filter-func-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gfonts-2-filter-func-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>import</span> <span class=pl-s1>re</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-func-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gfonts-2-filter-func-py-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-func-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gfonts-2-filter-func-py-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>def</span> <span class=pl-en>filter_fonts</span>(<span class=pl-s1>df</span>, <span class=pl-s1>regex_filters</span>):</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-func-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gfonts-2-filter-func-py-LC4\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s1>df_new</span> <span class=pl-c1>=</span> <span class=pl-s1>pd</span>.<span class=pl-en>concat</span>([<span class=pl-s1>df</span>.<span class=pl-en>filter</span>(<span class=pl-s1>regex</span><span class=pl-c1>=</span><span class=pl-s1>re</span>.<span class=pl-en>compile</span>(<span class=pl-s1>regex</span>, <span class=pl-s1>re</span>.<span class=pl-v>IGNORECASE</span>), <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>sum</span>(<span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>astype</span>(<span class=pl-s1>bool</span>) <span class=pl-k>for</span> <span class=pl-s1>regex</span> <span class=pl-c1>in</span> <span class=pl-s1>regex_filters</span>], <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-func-py-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gfonts-2-filter-func-py-LC5\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s1>mask</span> <span class=pl-c1>=</span> <span class=pl-s1>df_new</span>.<span class=pl-en>all</span>(<span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-func-py-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gfonts-2-filter-func-py-LC6\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-k>return</span> <span class=pl-en>list</span>(<span class=pl-s1>df</span>.<span class=pl-s1>loc</span>[<span class=pl-s1>mask</span>].<span class=pl-s1>family</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-func-py-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gfonts-2-filter-func-py-LC7\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-func-py-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gfonts-2-filter-func-py-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>filtered_fontnames</span> <span class=pl-c1>=</span> <span class=pl-en>filter_fonts</span>(<span class=pl-s1>df</span>, [<span class=pl-s>&#39;Black&#39;</span>, <span class=pl-s>&#39;cyrillic&#39;</span>, <span class=pl-s>&#39;_serif&#39;</span>])</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-func-py-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-gfonts-2-filter-func-py-LC9\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>filtered_fontnames</span></td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/erraticgenerator/0bfa88d8be5f3d48c6d564bfd77ea591/raw/b42d1b5c802820bfe6dbf9fce69200eab5036698/gfonts-2-filter-func.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/erraticgenerator/0bfa88d8be5f3d48c6d564bfd77ea591#file-gfonts-2-filter-func-py\">gfonts-2-filter-func.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<h2>Some Caveats</h2>\n<p>Before we move on, I want to point out some issues that I found. We are relying on the font data from the CSV annotations that we generated from the Google Fonts Developer API, but there are some discrepancies.</p>\n<ul>\n<li>First, the number of fonts present in the annotations is not the same as the number of font files we downloaded.</li>\n<li>Some fonts that are not indicated as <em>latin</em> still have latin alphabets.</li>\n<li><em>NotoSansTC</em> is present in the annotation but is not included in the zip archive. Probably because some languages such as Chinese or Korean have a lot of characters and font files get much bigger compared to latin fonts. It’s just my guess…</li>\n<li>A font called <em>Ballet</em> — the font file exists but it’s not in the annotation. There may be a few other cases like this.</li>\n<li>The name of the folder containing font files is mostly the same as the name of the fonts themselves but there are some exceptions. For example, a font called <em>SignikaNegative</em> is inside a folder called <em>signika</em>.</li>\n<li>A font called <em>BlackHanSans</em> is obviously a very thick black weight, but it is listed as <em>regular</em> weight.</li>\n</ul>\n<p>So, the annotation is not the complete representation of the font files we downloaded. As a whole, I think it is still a very valuable resource that we have.</p>\n<h2>Load Font File Path</h2>\n<p>We will use <code class=\"language-text\">glob</code> to load the fonts path. If you only want to filter fonts through weights such as <code class=\"language-text\">Regular</code>, <code class=\"language-text\">Bold</code>, <code class=\"language-text\">Thin</code>, simple filename checking will be enough as the weights/styles are already part of the file names, but you won't be able to use other annotations we looked at such as language subsets or category.</p>\n<p><div id=\"gist106213393\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gfonts-2-all-fonts-path-py\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-gfonts-2-all-fonts-path-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gfonts-2-all-fonts-path-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>import</span> <span class=pl-s1>glob</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-all-fonts-path-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gfonts-2-all-fonts-path-py-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-all-fonts-path-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gfonts-2-all-fonts-path-py-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># change the root directory according to your setup</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-all-fonts-path-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gfonts-2-all-fonts-path-py-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-v>ROOT</span> <span class=pl-c1>=</span> <span class=pl-s>&#39;../../input/fonts/ofl&#39;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-all-fonts-path-py-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gfonts-2-all-fonts-path-py-LC5\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-all-fonts-path-py-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gfonts-2-all-fonts-path-py-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># some fonts are within /ofl/fontname/static directory (2 levels deep)</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-all-fonts-path-py-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gfonts-2-all-fonts-path-py-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>all_fonts_path</span> <span class=pl-c1>=</span> <span class=pl-s1>glob</span>.<span class=pl-en>glob</span>(<span class=pl-v>ROOT</span> <span class=pl-c1>+</span> <span class=pl-s>&#39;/**/**/*.ttf&#39;</span>, <span class=pl-s1>recursive</span><span class=pl-c1>=</span><span class=pl-c1>True</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-all-fonts-path-py-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gfonts-2-all-fonts-path-py-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-en>print</span>(<span class=pl-s>&#39;number of font files in total: &#39;</span>, <span class=pl-en>len</span>(<span class=pl-s1>all_fonts_path</span>))</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/erraticgenerator/6b9bc56248d18f75a6d03f7f6e0060bb/raw/635d2712fb354ae6758db667675d2c3a0b87a059/gfonts-2-all-fonts-path.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/erraticgenerator/6b9bc56248d18f75a6d03f7f6e0060bb#file-gfonts-2-all-fonts-path-py\">gfonts-2-all-fonts-path.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">number of font files in total:  8708</code></pre></div>\n<h2>Filter Fonts</h2>\n<p>It is time to bring different pieces together into a single function that will take a DataFrame object and the path to font files, and then use the filters we define to return a list of filtered font paths.</p>\n<p><div id=\"gist106213418\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gfonts-2-filter-fonts-get-paths-py\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>def</span> <span class=pl-en>filter_fonts_get_paths</span>(<span class=pl-s1>df</span>, <span class=pl-s1>root</span><span class=pl-c1>=</span><span class=pl-s>&#39;./&#39;</span>, <span class=pl-s1>variants</span><span class=pl-c1>=</span>[<span class=pl-s>&#39;_&#39;</span>], <span class=pl-s1>subsets</span><span class=pl-c1>=</span>[<span class=pl-s>&#39;_&#39;</span>], <span class=pl-s1>category</span><span class=pl-c1>=</span><span class=pl-s>&#39;&#39;</span>):</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC2\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-c># exceptions</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC3\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>variants</span> <span class=pl-c1>or</span> <span class=pl-s1>variants</span> <span class=pl-c1>==</span> [<span class=pl-s>&#39;&#39;</span>] <span class=pl-c1>or</span> <span class=pl-s1>variants</span> <span class=pl-c1>==</span> <span class=pl-s>&#39;&#39;</span>: <span class=pl-s1>variants</span> <span class=pl-c1>=</span> [<span class=pl-s>&#39;_&#39;</span>]</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC4\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>subsets</span> <span class=pl-c1>or</span> <span class=pl-s1>subsets</span> <span class=pl-c1>==</span> [<span class=pl-s>&#39;&#39;</span>] <span class=pl-c1>or</span> <span class=pl-s1>subsets</span> <span class=pl-c1>==</span> <span class=pl-s>&#39;&#39;</span>: <span class=pl-s1>subsets</span> <span class=pl-c1>=</span> [<span class=pl-s>&#39;_&#39;</span>]</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC5\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-c># apply filters</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC6\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s1>regex_filters</span> <span class=pl-c1>=</span> <span class=pl-s1>variants</span> <span class=pl-c1>+</span> <span class=pl-s1>subsets</span> <span class=pl-c1>+</span> [<span class=pl-s>&#39;_&#39;</span><span class=pl-c1>+</span><span class=pl-s1>category</span>]</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC7\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s1>df_new</span> <span class=pl-c1>=</span> <span class=pl-s1>pd</span>.<span class=pl-en>concat</span>([<span class=pl-s1>df</span>.<span class=pl-en>filter</span>(<span class=pl-s1>regex</span><span class=pl-c1>=</span><span class=pl-s1>re</span>.<span class=pl-en>compile</span>(<span class=pl-s1>regex</span>, <span class=pl-s1>re</span>.<span class=pl-v>IGNORECASE</span>), <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>sum</span>(<span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>).<span class=pl-en>astype</span>(<span class=pl-s1>bool</span>) <span class=pl-k>for</span> <span class=pl-s1>regex</span> <span class=pl-c1>in</span> <span class=pl-s1>regex_filters</span>], <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC8\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s1>mask</span> <span class=pl-c1>=</span> <span class=pl-s1>df_new</span>.<span class=pl-en>all</span>(<span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC9\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s1>filtered_fontnames</span> <span class=pl-c1>=</span> <span class=pl-en>list</span>(<span class=pl-s1>df</span>.<span class=pl-s1>loc</span>[<span class=pl-s1>mask</span>].<span class=pl-s1>family</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC10\" class=\"blob-code blob-code-inner js-file-line\">    </td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC11\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-c># construct file paths</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC12\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s1>paths</span> <span class=pl-c1>=</span> []</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC13\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-k>for</span> <span class=pl-s1>fontname</span> <span class=pl-c1>in</span> <span class=pl-s1>filtered_fontnames</span>:</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC14\" class=\"blob-code blob-code-inner js-file-line\">        <span class=pl-k>if</span> <span class=pl-s1>variants</span> <span class=pl-c1>==</span> [<span class=pl-s>&#39;_&#39;</span>]: <span class=pl-c># select all variants</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC15\" class=\"blob-code blob-code-inner js-file-line\">            <span class=pl-s1>sel</span> <span class=pl-c1>=</span> <span class=pl-s1>glob</span>.<span class=pl-en>glob</span>(<span class=pl-s>f&#39;<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>root</span><span class=pl-kos>}</span></span>/<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>fontname</span>.<span class=pl-en>lower</span>()<span class=pl-kos>}</span></span>/**/*.ttf&#39;</span>, <span class=pl-s1>recursive</span><span class=pl-c1>=</span><span class=pl-c1>True</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC16\" class=\"blob-code blob-code-inner js-file-line\">            <span class=pl-s1>paths</span>.<span class=pl-en>extend</span>(<span class=pl-s1>sel</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC17\" class=\"blob-code blob-code-inner js-file-line\">        <span class=pl-k>else</span>:</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC18\" class=\"blob-code blob-code-inner js-file-line\">            <span class=pl-k>for</span> <span class=pl-s1>variant</span> <span class=pl-c1>in</span> <span class=pl-s1>variants</span>:</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L19\" class=\"blob-num js-line-number\" data-line-number=\"19\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC19\" class=\"blob-code blob-code-inner js-file-line\">                <span class=pl-s1>sel</span> <span class=pl-c1>=</span> <span class=pl-s1>glob</span>.<span class=pl-en>glob</span>(<span class=pl-s>f&#39;<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>root</span><span class=pl-kos>}</span></span>/<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>fontname</span>.<span class=pl-en>lower</span>()<span class=pl-kos>}</span></span>/**/<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>fontname</span><span class=pl-kos>}</span></span>-<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>variant</span><span class=pl-kos>}</span></span>.ttf&#39;</span>, <span class=pl-s1>recursive</span><span class=pl-c1>=</span><span class=pl-c1>True</span>) </td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L20\" class=\"blob-num js-line-number\" data-line-number=\"20\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC20\" class=\"blob-code blob-code-inner js-file-line\">                <span class=pl-k>for</span> <span class=pl-s1>path</span> <span class=pl-c1>in</span> <span class=pl-s1>sel</span>:</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L21\" class=\"blob-num js-line-number\" data-line-number=\"21\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC21\" class=\"blob-code blob-code-inner js-file-line\">                    <span class=pl-s1>paths</span>.<span class=pl-en>append</span>(<span class=pl-s1>path</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L22\" class=\"blob-num js-line-number\" data-line-number=\"22\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC22\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-en>print</span>(<span class=pl-s>f&#39;Found <span class=pl-s1><span class=pl-kos>{</span><span class=pl-en>len</span>(<span class=pl-s1>paths</span>)<span class=pl-kos>}</span></span> font files.&#39;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L23\" class=\"blob-num js-line-number\" data-line-number=\"23\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC23\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-k>return</span> <span class=pl-s1>paths</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L24\" class=\"blob-num js-line-number\" data-line-number=\"24\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC24\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L25\" class=\"blob-num js-line-number\" data-line-number=\"25\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC25\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># let&#39;s try the function</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-L26\" class=\"blob-num js-line-number\" data-line-number=\"26\"></td>\n        <td id=\"file-gfonts-2-filter-fonts-get-paths-py-LC26\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>paths</span> <span class=pl-c1>=</span> <span class=pl-en>filter_fonts_get_paths</span>(<span class=pl-s1>df</span>, <span class=pl-s1>root</span><span class=pl-c1>=</span><span class=pl-v>ROOT</span>, <span class=pl-s1>subsets</span><span class=pl-c1>=</span>[<span class=pl-s>&#39;latin&#39;</span>], <span class=pl-s1>variants</span><span class=pl-c1>=</span>[<span class=pl-s>&#39;thinitalic&#39;</span>], <span class=pl-s1>category</span><span class=pl-c1>=</span><span class=pl-s>&#39;sans-serif&#39;</span>)</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/erraticgenerator/6985c7ef6200a061310ddd688d5455fd/raw/27f7f9293103bd9b2b37899aa30f875c56c2aad3/gfonts-2-filter-fonts-get-paths.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/erraticgenerator/6985c7ef6200a061310ddd688d5455fd#file-gfonts-2-filter-fonts-get-paths-py\">gfonts-2-filter-fonts-get-paths.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>To describe what the function is doing — What we want to do is to look at both <code class=\"language-text\">filtered_fontnames</code> and its corresponding file path and check if the file exists. If so, the function returns a path to the file.</p>\n<p>From the <em>font</em> names, we can retrieve the <em>file</em> names so that we can load each font and later generate images. We filter fonts with weights, styles, subsets, and categories, but the file names only contain font names and weights/styles.</p>\n<p>A few things to note here:</p>\n<ul>\n<li>Depending on your OS, you may need to give case-sensitive filters. For example, <code class=\"language-text\">Bold</code>, <code class=\"language-text\">LightItalic</code> may work but <code class=\"language-text\">bold</code>, <code class=\"language-text\">lightitalic</code> may not. I am using a Mac, and it is case-insensitive. You also cannot combine mutually exclusive conditions together, such as filtering <code class=\"language-text\">sans-serif</code> and <code class=\"language-text\">serif</code> at the same time. You can, however, input a regular expression to create a more complex filter.</li>\n</ul>\n<p>Some variable fonts are not selected (ex. CrimsonPro, HeptaSlab) because they have different naming conventions than others. I just ignored them because they are not that many, and the variable fonts that have static versions are searchable through the filters.</p>\n<h2>Preview Font Images</h2>\n<p>It is finally time to see the fonts displayed as images.</p>\n<p><div id=\"gist106213543\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gfonts-2-preview-py\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>import</span> <span class=pl-s1>random</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-v>IMG_HEIGHT</span> <span class=pl-c1>=</span> <span class=pl-c1>512</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-v>IMG_WIDTH</span> <span class=pl-c1>=</span> <span class=pl-c1>512</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC5\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>paths</span> <span class=pl-c1>=</span> <span class=pl-en>filter_fonts_get_paths</span>(<span class=pl-s1>df</span>, <span class=pl-s1>root</span><span class=pl-c1>=</span><span class=pl-v>ROOT</span>, <span class=pl-s1>subsets</span><span class=pl-c1>=</span>[<span class=pl-s>&#39;&#39;</span>], <span class=pl-s1>variants</span><span class=pl-c1>=</span>[<span class=pl-s>&#39;bold&#39;</span>], <span class=pl-s1>category</span><span class=pl-c1>=</span><span class=pl-s>&#39;&#39;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>r</span> <span class=pl-c1>=</span> <span class=pl-s1>random</span>.<span class=pl-en>randrange</span>(<span class=pl-c1>0</span>, <span class=pl-en>len</span>(<span class=pl-s1>paths</span>))</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC8\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC9\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># sample text and font</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC10\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s>&quot;G&quot;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>text_size</span> <span class=pl-c1>=</span> <span class=pl-c1>400</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC12\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>x</span> <span class=pl-c1>=</span> <span class=pl-v>IMG_WIDTH</span><span class=pl-c1>/</span><span class=pl-c1>2</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC13\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>y</span> <span class=pl-c1>=</span> <span class=pl-v>IMG_HEIGHT</span><span class=pl-c1>*</span><span class=pl-c1>3</span><span class=pl-c1>/</span><span class=pl-c1>4</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC14\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>font</span> <span class=pl-c1>=</span> <span class=pl-v>ImageFont</span>.<span class=pl-en>truetype</span>(<span class=pl-s1>paths</span>[<span class=pl-s1>r</span>], <span class=pl-s1>text_size</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC15\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC16\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># get text info (not being used but may be useful)</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC17\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>text_width</span>, <span class=pl-s1>text_height</span> <span class=pl-c1>=</span> <span class=pl-s1>font</span>.<span class=pl-en>getsize</span>(<span class=pl-s1>text</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC18\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>left</span>, <span class=pl-s1>top</span>, <span class=pl-s1>right</span>, <span class=pl-s1>bottom</span> <span class=pl-c1>=</span> <span class=pl-s1>font</span>.<span class=pl-en>getbbox</span>(<span class=pl-s1>text</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L19\" class=\"blob-num js-line-number\" data-line-number=\"19\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC19\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-en>print</span>(<span class=pl-s>&#39;text w &amp; h: &#39;</span>, <span class=pl-s1>text_width</span>, <span class=pl-s1>text_height</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L20\" class=\"blob-num js-line-number\" data-line-number=\"20\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC20\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-en>print</span>(<span class=pl-s1>left</span>, <span class=pl-s1>top</span>, <span class=pl-s1>right</span>, <span class=pl-s1>bottom</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L21\" class=\"blob-num js-line-number\" data-line-number=\"21\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC21\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L22\" class=\"blob-num js-line-number\" data-line-number=\"22\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC22\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># create a blank canvas with extra space between lines</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L23\" class=\"blob-num js-line-number\" data-line-number=\"23\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC23\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>canvas</span> <span class=pl-c1>=</span> <span class=pl-v>Image</span>.<span class=pl-en>new</span>(<span class=pl-s>&#39;RGB&#39;</span>, (<span class=pl-v>IMG_WIDTH</span>, <span class=pl-v>IMG_HEIGHT</span>), <span class=pl-s>&quot;black&quot;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L24\" class=\"blob-num js-line-number\" data-line-number=\"24\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC24\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L25\" class=\"blob-num js-line-number\" data-line-number=\"25\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC25\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># draw the text onto the text canvas</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L26\" class=\"blob-num js-line-number\" data-line-number=\"26\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC26\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>draw</span> <span class=pl-c1>=</span> <span class=pl-v>ImageDraw</span>.<span class=pl-v>Draw</span>(<span class=pl-s1>canvas</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L27\" class=\"blob-num js-line-number\" data-line-number=\"27\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC27\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>draw</span>.<span class=pl-en>text</span>((<span class=pl-s1>x</span>, <span class=pl-s1>y</span>), <span class=pl-s1>text</span>, <span class=pl-s>&#39;white&#39;</span>, <span class=pl-s1>font</span>, <span class=pl-s1>anchor</span><span class=pl-c1>=</span><span class=pl-s>&#39;ms&#39;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L28\" class=\"blob-num js-line-number\" data-line-number=\"28\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC28\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-preview-py-L29\" class=\"blob-num js-line-number\" data-line-number=\"29\"></td>\n        <td id=\"file-gfonts-2-preview-py-LC29\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>plt</span>.<span class=pl-en>imshow</span>(<span class=pl-s1>canvas</span>)</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/erraticgenerator/6b0093720bcfb41d76b523abd7965815/raw/2b2516919e1e6e887ceaad263ed474e42f50ce1b/gfonts-2-preview.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/erraticgenerator/6b0093720bcfb41d76b523abd7965815#file-gfonts-2-preview-py\">gfonts-2-preview.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p><figure class='gatsby-resp-image-figure' style=''>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; '>\n      <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 32.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcElEQVQY0yWQTcsBYRSGfQ1SivHRpJDGpKyoYUXUhFix0SzGgpVkZass5PU1GTSzsPAHrOxs5q9YEEpp8BPc886zujrPuc9zncdEkmQwGOQ4rlqtulyuwWDwfD5jsZjH4wmHwzRNu93uZrP5+XxYlvV6vZFIJB6P+/3+YrFowkG40+lUKhVwu92+XC42mw1cLpdrtRogn89jItrAmGsAwzB6eDaboS+TyYAx5Xq9Akaj0Xa77ff7gUCgUCi8Xi8otFqt4XDodDp9Pl8ymdTD8/mcoqj9fg8Znudvt5vVaj0ej6FQqFQqwTabzX6/X7vdLstyvV5PpVLpdBoKerjRaOAdSZKwkiAIj8fDKB4OB1VVkUf4/X7jNpfLdbvdXq+H22g0qofNZjO+ClbGzufzmSAIMJ5yOBwAaN/vd/iDIWWxWACJRMK0Wq02m81isRBFcTqdnk4nTdMURVmv10ZxuVxCAdoo/v2fyWQyHo93u90PxUCCh7j6WxwAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='It&#39;s working!' title='It&#39;s working!' src='/static/0885cf07ec8402f7aa7740b78ad2ff92/5a190/preview-g.png' srcset='/static/0885cf07ec8402f7aa7740b78ad2ff92/5a46d/preview-g.png 300w,\n/static/0885cf07ec8402f7aa7740b78ad2ff92/0a47e/preview-g.png 600w,\n/static/0885cf07ec8402f7aa7740b78ad2ff92/5a190/preview-g.png 800w' sizes='(max-width: 800px) 100vw, 800px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy'>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>It&#39;s working!</figcaption>\n  </figure></p>\n<h2>Everything Pieced Together</h2>\n<p>Here is the code block that pieces everything together. This time, all the images will be saved as PNG files.</p>\n<p><div id=\"gist106213602\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gfonts-2-everything-py\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>from</span> <span class=pl-v>IPython</span>.<span class=pl-s1>display</span> <span class=pl-k>import</span> <span class=pl-s1>clear_output</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># display images</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>monitor</span> <span class=pl-c1>=</span> <span class=pl-c1>False</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC5\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># font filtering</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df</span> <span class=pl-c1>=</span> <span class=pl-s1>pd</span>.<span class=pl-en>read_csv</span>(<span class=pl-s>&#39;./google-fonts-annotaion.csv&#39;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>paths</span> <span class=pl-c1>=</span> <span class=pl-en>filter_fonts_get_paths</span>(<span class=pl-s1>df</span>, <span class=pl-s1>root</span><span class=pl-c1>=</span><span class=pl-v>ROOT</span>, <span class=pl-s1>subsets</span><span class=pl-c1>=</span>[<span class=pl-s>&#39;latin&#39;</span>], <span class=pl-s1>variants</span><span class=pl-c1>=</span>[<span class=pl-s>&#39;bold&#39;</span>], <span class=pl-s1>category</span><span class=pl-c1>=</span><span class=pl-s>&#39;serif&#39;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC9\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC10\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># text setup</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s>&quot;G&quot;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC12\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>x</span> <span class=pl-c1>=</span> <span class=pl-v>IMG_WIDTH</span><span class=pl-c1>/</span><span class=pl-c1>2</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC13\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>y</span> <span class=pl-c1>=</span> <span class=pl-v>IMG_HEIGHT</span><span class=pl-c1>*</span><span class=pl-c1>3</span><span class=pl-c1>/</span><span class=pl-c1>4</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC14\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>text_size</span> <span class=pl-c1>=</span> <span class=pl-c1>400</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC15\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC16\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># create save directory</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC17\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>target_dir</span> <span class=pl-c1>=</span> <span class=pl-s>f&#39;./fonts-images/<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>text</span><span class=pl-kos>}</span></span>&#39;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC18\" class=\"blob-code blob-code-inner js-file-line\">!m<span class=pl-s1>kdir</span> <span class=pl-c1>-</span><span class=pl-s1>p</span> $<span class=pl-s1>target_dir</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L19\" class=\"blob-num js-line-number\" data-line-number=\"19\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC19\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L20\" class=\"blob-num js-line-number\" data-line-number=\"20\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC20\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># drawing setup</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L21\" class=\"blob-num js-line-number\" data-line-number=\"21\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC21\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>canvas</span> <span class=pl-c1>=</span> <span class=pl-v>Image</span>.<span class=pl-en>new</span>(<span class=pl-s>&#39;RGB&#39;</span>, (<span class=pl-v>IMG_WIDTH</span>, <span class=pl-v>IMG_HEIGHT</span>), <span class=pl-s>&quot;black&quot;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L22\" class=\"blob-num js-line-number\" data-line-number=\"22\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC22\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>draw</span> <span class=pl-c1>=</span> <span class=pl-v>ImageDraw</span>.<span class=pl-v>Draw</span>(<span class=pl-s1>canvas</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L23\" class=\"blob-num js-line-number\" data-line-number=\"23\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC23\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L24\" class=\"blob-num js-line-number\" data-line-number=\"24\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC24\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>for</span> <span class=pl-s1>i</span>, <span class=pl-s1>path</span> <span class=pl-c1>in</span> <span class=pl-en>enumerate</span>(<span class=pl-s1>paths</span>):    </td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L25\" class=\"blob-num js-line-number\" data-line-number=\"25\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC25\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s1>font</span> <span class=pl-c1>=</span> <span class=pl-v>ImageFont</span>.<span class=pl-en>truetype</span>(<span class=pl-s1>path</span>, <span class=pl-s1>text_size</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L26\" class=\"blob-num js-line-number\" data-line-number=\"26\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC26\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s1>draw</span>.<span class=pl-en>rectangle</span>((<span class=pl-c1>0</span>,<span class=pl-c1>0</span>,<span class=pl-v>IMG_WIDTH</span>,<span class=pl-v>IMG_HEIGHT</span>),<span class=pl-s1>fill</span><span class=pl-c1>=</span><span class=pl-s>&#39;black&#39;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L27\" class=\"blob-num js-line-number\" data-line-number=\"27\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC27\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s1>draw</span>.<span class=pl-en>text</span>((<span class=pl-s1>x</span>, <span class=pl-s1>y</span>), <span class=pl-s1>text</span>, <span class=pl-s>&#39;white&#39;</span>, <span class=pl-s1>font</span>, <span class=pl-s1>anchor</span><span class=pl-c1>=</span><span class=pl-s>&#39;ms&#39;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L28\" class=\"blob-num js-line-number\" data-line-number=\"28\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC28\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s1>canvas</span>.<span class=pl-en>save</span>(<span class=pl-s>f&#39;<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>target_dir</span><span class=pl-kos>}</span></span>/<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>i</span>:05<span class=pl-kos>}</span></span>.png&#39;</span>, <span class=pl-s>&quot;PNG&quot;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L29\" class=\"blob-num js-line-number\" data-line-number=\"29\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC29\" class=\"blob-code blob-code-inner js-file-line\">    </td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L30\" class=\"blob-num js-line-number\" data-line-number=\"30\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC30\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-k>if</span> <span class=pl-s1>monitor</span>:</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L31\" class=\"blob-num js-line-number\" data-line-number=\"31\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC31\" class=\"blob-code blob-code-inner js-file-line\">        <span class=pl-en>clear_output</span>(<span class=pl-s1>wait</span><span class=pl-c1>=</span><span class=pl-c1>True</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L32\" class=\"blob-num js-line-number\" data-line-number=\"32\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC32\" class=\"blob-code blob-code-inner js-file-line\">        <span class=pl-s1>plt</span>.<span class=pl-en>imshow</span>(<span class=pl-s1>canvas</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L33\" class=\"blob-num js-line-number\" data-line-number=\"33\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC33\" class=\"blob-code blob-code-inner js-file-line\">        <span class=pl-s1>plt</span>.<span class=pl-en>show</span>()</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L34\" class=\"blob-num js-line-number\" data-line-number=\"34\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC34\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-k>if</span> <span class=pl-s1>i</span> <span class=pl-c1>%</span> <span class=pl-c1>200</span> <span class=pl-c1>==</span> <span class=pl-c1>0</span>:</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L35\" class=\"blob-num js-line-number\" data-line-number=\"35\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC35\" class=\"blob-code blob-code-inner js-file-line\">        <span class=pl-en>print</span>(<span class=pl-s>f&#39;exporting <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>i</span>:05<span class=pl-kos>}</span></span>th of <span class=pl-s1><span class=pl-kos>{</span><span class=pl-en>len</span>(<span class=pl-s1>paths</span>)<span class=pl-kos>}</span></span>&#39;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L36\" class=\"blob-num js-line-number\" data-line-number=\"36\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC36\" class=\"blob-code blob-code-inner js-file-line\">        </td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-2-everything-py-L37\" class=\"blob-num js-line-number\" data-line-number=\"37\"></td>\n        <td id=\"file-gfonts-2-everything-py-LC37\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-en>print</span>(<span class=pl-s>&#39;Exporting completed.&#39;</span>)</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/erraticgenerator/ab3dcaf4ab0eb7ba50378fe17bc1f97f/raw/d48d15c6e00f376b8c9fdb7e019b0e595a5e0fc7/gfonts-2-everything.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/erraticgenerator/ab3dcaf4ab0eb7ba50378fe17bc1f97f#file-gfonts-2-everything-py\">gfonts-2-everything.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<h2>Conclusion</h2>\n<p>Now, you can use the generated images as inputs to Convolutional Neural Networks such as Generative Adversarial Networks or Autoencoders. That is what I am going to be playing the images with. I am sure you can find examples of the model architectures pretty easily on Medium and elsewhere.</p>\n<p>I hope you found my post useful — please let me know if you make some fun stuff with the fonts!</p>","excerpt":"Machine learning training time-lapse. Image by Author. Let’s pick up from where we left off in the last post. We cleaned up the JSON…","frontmatter":{"slug":"/blog/use-google-fonts-for-machine-learning-part2","title":"Use Google Fonts for Machine Learning (Part 2: Filter & Generate)","subtitle":"Quickly generate hundreds of font images.","date":"November 01, 2020","tags":["python","machine learning","typography","fonts"]}}},"pageContext":{"slug":"/blog/use-google-fonts-for-machine-learning-part2","pagePath":"blog/use-google-fonts-for-machine-learning-part2"}},"staticQueryHashes":["1696241065","3380088787"]}