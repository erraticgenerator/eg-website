{"componentChunkName":"component---src-templates-blog-post-template-js","path":"/blog/use-google-fonts-for-machine-learning-part1","result":{"data":{"markdownRemark":{"html":"<p><figure class='gatsby-resp-image-figure' style=''>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; '>\n      <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 43.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjElEQVQoz02Ryc4BURSE+/EsrKwE0RFijDaEEPMY8xAEKw/RWxLzFISgDTsrz/F/0pt/c/pU3epzT9UV6vW6xWLxeDwmk8nlchkMBqPR6Pf79Xq93W6nt9ls4XDYbDajEUXR4XAEg0GNRrNYLITRaFQsFqvVaiaTqdVqqVSKptVqJZPJcrkMpPZ6PfU0m80ibjabkiQdj0dBluXNZrPf79frNc1yuZzP5zTT6fQ/XK1WVDS73e5wOMxms8/nI2i1WraNRqNUr9drtVrZNh6P63S6QCAQCoUwFYlE1FMqDFvg7rf27XZ7PB6v14v6fr/v9/vz+QQqigKkAmmu1yskpzA0l8vl+/0KDGYk3siDqW63m4S4mUpsTqfT5/MlEgkVokEci8VI93fzeDzmgyVMbrdbtcfeZDJRSRisIgNiFcgp8Oc5n8/zWt1ulzDJHPNE2m63CbzRaJRKJfjhcEjgnU6H5NEg5vLT6STkcjlEYEbwQ6FQ4DGAvAcjVHW/36eHrFQq8IPBIJ1On8/nP+yNPs3FBycSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='Google Fonts images generated from a Python script' title='Google Fonts images generated from a Python script' src='/eg-website/static/6142f93069e7945f04c89914b8a695d4/c1b63/google-fonts-images.png' srcset='/eg-website/static/6142f93069e7945f04c89914b8a695d4/5a46d/google-fonts-images.png 300w,\n/eg-website/static/6142f93069e7945f04c89914b8a695d4/0a47e/google-fonts-images.png 600w,\n/eg-website/static/6142f93069e7945f04c89914b8a695d4/c1b63/google-fonts-images.png 1200w,\n/eg-website/static/6142f93069e7945f04c89914b8a695d4/d61c2/google-fonts-images.png 1800w,\n/eg-website/static/6142f93069e7945f04c89914b8a695d4/e8950/google-fonts-images.png 2000w' sizes='(max-width: 1200px) 100vw, 1200px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy'>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>Google Fonts images generated from a Python script</figcaption>\n  </figure></p>\n<p><em>Note: This is the first post of the two-part series where I will go over downloading Google Fonts and cleaning up the JSON annotations before we can filter fonts and generate PNG images. The link to the 2nd part is at the bottom.</em></p>\n<p>The first time I tried to learn machine learning a few years ago, I felt miserable. I had a hard time installing dependencies, let alone understanding any basic machine learning algorithms. Fast forward to 2020, with more time at home, I decided to give ML another try. This time, it was much easier to find friendly learning resources and tools. Thanks to Tensorflow/Keras, Kaggle, Youtube, and the likes, I was finally able to understand the basics enough to do some experiments of my own.</p>\n<p>One thing I really wanted to try and learn was to train Generative Adversarial Network models with fonts. Working with the simple MNIST hand-written digits is fun at the beginning, but I wanted to create or curate my own dataset to continue with the experiments. What better place to find lots of free fonts than <a href=\"https://fonts.google.com\">Google Fonts</a>? This will give me more control over the dataset and the ability to create high-resolution images (MNIST is only 28x28 pixels). It also comes with helpful annotations for each font family. Here, I would like to share my experience so far starting with downloading and managing thousands of Google Fonts and generating PNG images of each glyph. If you are experienced, this may seem too easy, but for someone like me who is just starting a journey in ML, I hope my post will be a little bit useful. This post is a documentation of my learning process.</p>\n<p><a href=\"http://localhost:8000/blog/experiment.gif\">http://localhost:8000/blog/experiment.gif</a></p>\n<p><figure class=\"md-figure\"><img src=\"/eg-website/static/experiment-5e4ee8ffea13dbf3e423b60dbad46096.gif\"><figcaption>A quick experiment with GAN trained on Google Fonts</figcaption></figure></p>\n<h2>Download Google Fonts and JSON Annotations</h2>\n<p>If you go to <a href=\"https://github.com/google/fonts\">Google Fonts Github repository</a>, they conveniently provide a zip archive (click to download) that includes all the font files (TTF), but I noticed that this zip archive is not always up to date. Instead, we can simply clone the entire Github repo from your terminal. This should give you the most up-to-date list of fonts. If you don’t want to go the Terminal route, find the green Code button to download the repo as a zip file.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> <span class=\"token function\">git</span> clone https://github.com/google/fonts.git</code></pre></div>\n<p>If you simply want to use the whole archive to do experiments, this will be enough, but I will use Google Fonts API to get a bit more information about each font in the list. Follow <a href=\"https://developers.google.com/fonts/docs/developer_api\">this link</a> to the Google Fonts Developer API. You will need to get a free API KEY to download the JSON file, which we will use for the rest of this post.</p>\n<p><a href=\"https://www.googleapis.com/webfonts/v1/webfonts?key=YOUR-API-KEY\">https://www.googleapis.com/webfonts/v1/webfonts?key=YOUR-API-KEY</a></p>\n<p>Although we may not use the JSON directly in the model training (say, GANs), we can easily and quickly extract useful information about thousands of fonts such as what weights, styles, subsets are supported in each font family.</p>\n<h2>Setup Jupyter Notebook</h2>\n<p>I will treat this post as a Jupyter notebook, so if you want to follow along, you can open up a new notebook in your own environment, and run each code cell one by one. By the way, I am running Jupyter Lab on a Conda environment on MacbookPro.</p>\n<p>Let’s first import the main modules we will be using:</p>\n<p><div id=\"gist106211071\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gfonts-1-imports-py\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-gfonts-1-imports-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gfonts-1-imports-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>import</span> <span class=pl-s1>matplotlib</span>.<span class=pl-s1>pyplot</span> <span class=pl-k>as</span> <span class=pl-s1>plt</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-imports-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gfonts-1-imports-py-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>from</span> <span class=pl-s1>sklearn</span>.<span class=pl-s1>preprocessing</span> <span class=pl-k>import</span> <span class=pl-v>MultiLabelBinarizer</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-imports-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gfonts-1-imports-py-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>import</span> <span class=pl-s1>pandas</span> <span class=pl-k>as</span> <span class=pl-s1>pd</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-imports-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gfonts-1-imports-py-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>import</span> <span class=pl-s1>numpy</span> <span class=pl-k>as</span> <span class=pl-s1>np</span></td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/erraticgenerator/e6d010201f0b56e9f1aef7a0ee2720df/raw/66d6cf8bdb7eb8a5c5d9837eed5c6de2cf3f344e/gfonts-1-imports.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/erraticgenerator/e6d010201f0b56e9f1aef7a0ee2720df#file-gfonts-1-imports-py\">gfonts-1-imports.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<h2>Load JSON Annotations</h2>\n<p>Let’s first take a look at the JSON data by loading it as pandas.DataFrame. The JSON file has only 2 columns, <em>kind</em>, and <em>items</em>. The kind column doesn’t seem so useful, but the items column has a lot more information. A problem is that it is nested and it is in dict format. We can simply use <code class=\"language-text\">pd.json_normalize()</code> to flatten the items column.</p>\n<p><div id=\"gist106211237\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gfonts-1-download-json-py\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-gfonts-1-download-json-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gfonts-1-download-json-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># option 1. dynamically download JSON</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-download-json-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gfonts-1-download-json-py-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># url = &#39;https://www.googleapis.com/webfonts/v1/webfonts?key=&#39;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-download-json-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gfonts-1-download-json-py-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># key = &#39;YOUR-API-KEY&#39;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-download-json-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gfonts-1-download-json-py-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># data = pd.read_json(url+key, orient=&#39;&#39;)</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-download-json-py-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gfonts-1-download-json-py-LC5\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-download-json-py-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gfonts-1-download-json-py-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># option 2. use JSON already downloaded (replace with your own file path)</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-download-json-py-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gfonts-1-download-json-py-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df</span> <span class=pl-c1>=</span> <span class=pl-s1>pd</span>.<span class=pl-en>read_json</span>(<span class=pl-s>&#39;../../input/fonts-master.json&#39;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-download-json-py-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gfonts-1-download-json-py-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># df.head()</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-download-json-py-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-gfonts-1-download-json-py-LC9\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-download-json-py-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-gfonts-1-download-json-py-LC10\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># flatten the JSON hierarchy (easier to handle this way)</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-download-json-py-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-gfonts-1-download-json-py-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df</span> <span class=pl-c1>=</span> <span class=pl-s1>pd</span>.<span class=pl-en>json_normalize</span>(<span class=pl-s1>df</span>[<span class=pl-s>&#39;items&#39;</span>])</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-download-json-py-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-gfonts-1-download-json-py-LC12\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># df.head()</span></td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/erraticgenerator/eecd6fe37a3e1cccd2baec6a919a1a19/raw/3fe1641f73fe4b769d9e4cbf22b37c0fbea1ee34/gfonts-1-download-json.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/erraticgenerator/eecd6fe37a3e1cccd2baec6a919a1a19#file-gfonts-1-download-json-py\">gfonts-1-download-json.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>We can display one of the font families to see it up close.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">data<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">.</span>family <span class=\"token operator\">==</span> <span class=\"token string\">'Encode Sans'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2>Clean Up and Encode Data</h2>\n<p>I decided that I will not need many of the columns for my machine learning training. The columns that I find particularly interesting are <code class=\"language-text\">family</code>, <code class=\"language-text\">variants</code>, <code class=\"language-text\">subsets</code> and <code class=\"language-text\">category</code> as these will directly affect the letterforms. Let’s just select these columns.</p>\n<p>I am also removing any space from <code class=\"language-text\">family</code> string because that is how the font files are named. It will make things a bit easier when we later load the file paths.</p>\n<p><div id=\"gist106211750\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gfonts-1-cleanup-py\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-gfonts-1-cleanup-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gfonts-1-cleanup-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># select only the columns we need</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-cleanup-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gfonts-1-cleanup-py-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>cols</span> <span class=pl-c1>=</span> [<span class=pl-s>&#39;family&#39;</span>, <span class=pl-s>&#39;variants&#39;</span>, <span class=pl-s>&#39;subsets&#39;</span>, <span class=pl-s>&#39;category&#39;</span>]</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-cleanup-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gfonts-1-cleanup-py-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df</span> <span class=pl-c1>=</span> <span class=pl-s1>df</span>[<span class=pl-s1>cols</span>]</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-cleanup-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gfonts-1-cleanup-py-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># df.head(5)</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-cleanup-py-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gfonts-1-cleanup-py-LC5\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-cleanup-py-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gfonts-1-cleanup-py-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># Remove any space from family string so that it matchs with file name convention.</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-cleanup-py-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gfonts-1-cleanup-py-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df</span>.<span class=pl-s1>family</span> <span class=pl-c1>=</span> [<span class=pl-s1>name</span>.<span class=pl-en>replace</span>(<span class=pl-s>&#39; &#39;</span>, <span class=pl-s>&#39;&#39;</span>) <span class=pl-k>for</span> <span class=pl-s1>name</span> <span class=pl-c1>in</span> <span class=pl-s1>df</span>.<span class=pl-s1>family</span>]</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-cleanup-py-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gfonts-1-cleanup-py-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df</span>.<span class=pl-en>head</span>(<span class=pl-c1>5</span>)</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/erraticgenerator/e3138817b36a1a54aa59716379136062/raw/ac9236a1a36bd2a364e36d3c184c226b5133d30e/gfonts-1-cleanup.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/erraticgenerator/e3138817b36a1a54aa59716379136062#file-gfonts-1-cleanup-py\">gfonts-1-cleanup.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>You may have already noticed that variants and subsets column values are enclosed with square brackets as Python lists. (ex. <code class=\"language-text\">[regular, 500, 600, 700, 800]</code>) We will create new columns for each value and assign either 0 or 1 for each font family. This one-hot encoding will make it easy to filter fonts with different conditions. (ie. filter fonts that have regular weights that support Thai character set.) I have tried a few different methods and the <em>Scikit-Learn</em> module gave me the result I needed.</p>\n<p><div id=\"gist106211852\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gfonts-1-onehot-py\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-gfonts-1-onehot-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gfonts-1-onehot-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>mlb</span> <span class=pl-c1>=</span> <span class=pl-v>MultiLabelBinarizer</span>()</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-onehot-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gfonts-1-onehot-py-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-onehot-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gfonts-1-onehot-py-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># one-hot encoding + prefix</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-onehot-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gfonts-1-onehot-py-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df</span> <span class=pl-c1>=</span> <span class=pl-s1>df</span>.<span class=pl-en>join</span>(<span class=pl-s1>pd</span>.<span class=pl-v>DataFrame</span>(<span class=pl-s1>mlb</span>.<span class=pl-en>fit_transform</span>(<span class=pl-s1>df</span>.<span class=pl-en>pop</span>(<span class=pl-s>&#39;variants&#39;</span>)),</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-onehot-py-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gfonts-1-onehot-py-LC5\" class=\"blob-code blob-code-inner js-file-line\">                          <span class=pl-s1>columns</span><span class=pl-c1>=</span>[<span class=pl-s1>x</span> <span class=pl-k>for</span> <span class=pl-s1>x</span> <span class=pl-c1>in</span> <span class=pl-s1>mlb</span>.<span class=pl-s1>classes_</span>],</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-onehot-py-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gfonts-1-onehot-py-LC6\" class=\"blob-code blob-code-inner js-file-line\">                          <span class=pl-s1>index</span><span class=pl-c1>=</span><span class=pl-s1>df</span>.<span class=pl-s1>index</span>))</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-onehot-py-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gfonts-1-onehot-py-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df</span> <span class=pl-c1>=</span> <span class=pl-s1>df</span>.<span class=pl-en>join</span>(<span class=pl-s1>pd</span>.<span class=pl-v>DataFrame</span>(<span class=pl-s1>mlb</span>.<span class=pl-en>fit_transform</span>(<span class=pl-s1>df</span>.<span class=pl-en>pop</span>(<span class=pl-s>&#39;subsets&#39;</span>)),</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-onehot-py-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gfonts-1-onehot-py-LC8\" class=\"blob-code blob-code-inner js-file-line\">                          <span class=pl-s1>columns</span><span class=pl-c1>=</span>[<span class=pl-s>&#39;subsets_&#39;</span> <span class=pl-c1>+</span> <span class=pl-s1>x</span> <span class=pl-k>for</span> <span class=pl-s1>x</span> <span class=pl-c1>in</span> <span class=pl-s1>mlb</span>.<span class=pl-s1>classes_</span>],</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-onehot-py-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-gfonts-1-onehot-py-LC9\" class=\"blob-code blob-code-inner js-file-line\">                          <span class=pl-s1>index</span><span class=pl-c1>=</span><span class=pl-s1>df</span>.<span class=pl-s1>index</span>))</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-onehot-py-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-gfonts-1-onehot-py-LC10\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df</span> <span class=pl-c1>=</span> <span class=pl-s1>df</span>.<span class=pl-en>join</span>(<span class=pl-s1>pd</span>.<span class=pl-en>get_dummies</span>(<span class=pl-s1>df</span>[<span class=pl-s>&#39;category&#39;</span>], <span class=pl-s1>prefix</span><span class=pl-c1>=</span><span class=pl-s>&quot;category&quot;</span>)).<span class=pl-en>drop</span>([<span class=pl-s>&#39;category&#39;</span>], <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-c1>1</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-onehot-py-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-gfonts-1-onehot-py-LC11\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-onehot-py-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-gfonts-1-onehot-py-LC12\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df</span>.<span class=pl-en>head</span>(<span class=pl-c1>5</span>)</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/erraticgenerator/29292524b9db891989f7a5a9eebef47a/raw/b016233c03eb18a253bc89001fd3e792de02f984/gfonts-1-onehot.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/erraticgenerator/29292524b9db891989f7a5a9eebef47a#file-gfonts-1-onehot-py\">gfonts-1-onehot.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>Now, we have separate columns for each variable, and the font families have a value of 0 or 1 for each column depending on whether they support each variable. The variants columns are named <em>100, 100italic, 200, 200italic, 300, 300italic</em>, etc. which can work just fine, but I wanted to go one step further by renaming them so that it will match the way the font files are named. (ex. Barlow-BlackItalic.ttf instead of Barlow-900italic.ttf) This hand labeling could definitely be improved, but this worked for me anyway.</p>\n<p><div id=\"gist106211897\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gfonts-1-rename-columns-py\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>col_names</span> <span class=pl-c1>=</span> {</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC2\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;100&quot;</span>: <span class=pl-s>&quot;thin&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC3\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;100italic&quot;</span>: <span class=pl-s>&quot;thinitalic&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC4\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;200&quot;</span>: <span class=pl-s>&quot;extralight&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC5\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;200italic&quot;</span>: <span class=pl-s>&quot;extralightitalic&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC6\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;300&quot;</span>: <span class=pl-s>&quot;light&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC7\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;300italic&quot;</span>: <span class=pl-s>&quot;lightitalic&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC8\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;400&quot;</span>: <span class=pl-s>&quot;regular&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC9\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;regular&quot;</span>: <span class=pl-s>&quot;regular&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC10\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;400italic&quot;</span>: <span class=pl-s>&quot;italic&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC11\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;italic&quot;</span>: <span class=pl-s>&quot;italic&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC12\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;500&quot;</span>: <span class=pl-s>&quot;medium&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC13\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;500italic&quot;</span>: <span class=pl-s>&quot;mediumitalic&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC14\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;600&quot;</span>: <span class=pl-s>&quot;semibold&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC15\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;600italic&quot;</span>: <span class=pl-s>&quot;semibolditalic&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC16\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;700&quot;</span>: <span class=pl-s>&quot;bold&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC17\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;700italic&quot;</span>: <span class=pl-s>&quot;bolditalic&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC18\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;800&quot;</span>: <span class=pl-s>&quot;extrabold&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L19\" class=\"blob-num js-line-number\" data-line-number=\"19\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC19\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;800italic&quot;</span>: <span class=pl-s>&quot;extrabolditalic&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L20\" class=\"blob-num js-line-number\" data-line-number=\"20\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC20\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;900&quot;</span>: <span class=pl-s>&quot;black&quot;</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L21\" class=\"blob-num js-line-number\" data-line-number=\"21\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC21\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s>&quot;900italic&quot;</span>: <span class=pl-s>&quot;blackitalic&quot;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L22\" class=\"blob-num js-line-number\" data-line-number=\"22\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC22\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L23\" class=\"blob-num js-line-number\" data-line-number=\"23\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC23\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>col_names</span> <span class=pl-c1>=</span> {<span class=pl-s1>k</span>:<span class=pl-s>f&#39;variants_<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>v</span><span class=pl-kos>}</span></span>&#39;</span> <span class=pl-k>for</span> <span class=pl-s1>k</span>, <span class=pl-s1>v</span> <span class=pl-c1>in</span> <span class=pl-s1>col_names</span>.<span class=pl-en>items</span>()}</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L24\" class=\"blob-num js-line-number\" data-line-number=\"24\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC24\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L25\" class=\"blob-num js-line-number\" data-line-number=\"25\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC25\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df</span> <span class=pl-c1>=</span> <span class=pl-s1>df</span>.<span class=pl-en>rename</span>(<span class=pl-s1>col_names</span>, <span class=pl-s1>axis</span><span class=pl-c1>=</span><span class=pl-s>&#39;columns&#39;</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L26\" class=\"blob-num js-line-number\" data-line-number=\"26\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC26\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gfonts-1-rename-columns-py-L27\" class=\"blob-num js-line-number\" data-line-number=\"27\"></td>\n        <td id=\"file-gfonts-1-rename-columns-py-LC27\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>df</span>.<span class=pl-s1>columns</span></td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/erraticgenerator/edd1a23f814d5717f2eca8b8d83e868e/raw/8c64cbac371312765d9365e1b6e76505dad19601/gfonts-1-rename-columns.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/erraticgenerator/edd1a23f814d5717f2eca8b8d83e868e#file-gfonts-1-rename-columns-py\">gfonts-1-rename-columns.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<h2>Export as CSV File</h2>\n<p><figure class='gatsby-resp-image-figure' style=''>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; '>\n      <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 41.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7UlEQVQY012QSQuDMBCF8/9/kctF8KbgpdEU2l48uCG4Jybx0GeGinSQx/ObJZOwYRiyLHt93uL5zIsCHz+l4HleCPHIuYOOcA5yOiGQBWRt2wZBkCRJWZbTNM3LgnGLU3gywzjO80w6Qn+cdV3neR4OhzFaW2OUlIe1Silr7XEcMLtSxph936HEEShjdV1HUYSVmqahtJQSOSg8GeWaSYkjtm1jfd/7vp+mKTVrrUGhKNIu8Is2Iii4c4aeMAyxNi5/NdNgeDLUQHrnrKqqOI7xeJhC9G9t5eJvbSo4m687UwIveSmZdV0xl/TOv24UvRqOAjD6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='table' title='table' src='/eg-website/static/d4ec245a1a7a1a6bcfada99b12066d69/00d43/table.png' srcset='/eg-website/static/d4ec245a1a7a1a6bcfada99b12066d69/5a46d/table.png 300w,\n/eg-website/static/d4ec245a1a7a1a6bcfada99b12066d69/0a47e/table.png 600w,\n/eg-website/static/d4ec245a1a7a1a6bcfada99b12066d69/00d43/table.png 1000w' sizes='(max-width: 1000px) 100vw, 1000px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy'>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>table</figcaption>\n  </figure></p>\n<p>I think our DataFrame is looking pretty good at this point. Let’s export as a CSV file. The numerical index values do not seem to have any significant meaning for our purpose so I decided not to include in the file.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>to_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'google-fonts-annotaion.csv'</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2>What‘s Next</h2>\n<p>In the next part, we will load this CSV file into another Notebook, and filter the fonts and then generate a bunch of PNG images.</p>\n<p>Please let me know if you have any comments or suggestions, and I will see you in the next post.</p>","excerpt":"Note: This is the first post of the two-part series where I will go over downloading Google Fonts and cleaning up the JSON annotations…","frontmatter":{"slug":"/blog/use-google-fonts-for-machine-learning-part1","title":"Use Google Fonts for Machine Learning (Part 1: Annotation)","subtitle":"Filter the fonts you need out of thousands of Google Fonts","date":"October 31, 2020","tags":["python","machine learning","typography","fonts"]}}},"pageContext":{"slug":"/blog/use-google-fonts-for-machine-learning-part1","pagePath":"blog/use-google-fonts-for-machine-learning-part1"}},"staticQueryHashes":["1696241065","3380088787"]}